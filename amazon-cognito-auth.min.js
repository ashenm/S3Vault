/**
 * Amazon Cognito Auth SDK for JavaScript
 * https://github.com/aws/amazon-cognito-auth-js/blob/master/dist/amazon-cognito-auth.js
 *
 * Modified by Ashen Gunaratne
 * mail@ashenm.ml
 *
 */

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,e){a!=Array.prototype&&a!=Object.prototype&&(a[c]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
(function(a,c){"object"===typeof exports&&"object"===typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):"object"===typeof exports?exports.AmazonCognitoIdentity=c():a.AmazonCognitoIdentity=c()})(this,function(){return function(a){function c(g){if(e[g])return e[g].exports;var b=e[g]={exports:{},id:g,loaded:!1};a[g].call(b.exports,b,b.exports,c);b.loaded=!0;return b.exports}var e={};c.m=a;c.c=e;c.p="";return c(0)}([function(a,c,e){Object.defineProperty(c,"__esModule",
{value:!0});var g=e(9);Object.keys(g).forEach(function(b){"default"!==b&&"__esModule"!==b&&Object.defineProperty(c,b,{enumerable:!0,get:function(){return g[b]}})});(function(b){if(b&&b.__esModule)return b;var k={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(k[a]=b[a]);k["default"]=b;return k})(g);"undefined"!==typeof window&&!window.crypto&&window.msCrypto&&(window.crypto=window.msCrypto)},function(a,c){Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function b(b,
a){for(var d=0;d<a.length;d++){var f=a[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(b,f.key,f)}}return function(a,c,d){c&&b(a.prototype,c);d&&b(a,d);return a}}(),g=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.jwtToken=b||"";this.payload=this.decodePayload()}e(a,[{key:"getJwtToken",value:function(){return this.jwtToken}},{key:"setJwtToken",value:function(a){this.jwtToken=a}},{key:"getExpiration",
value:function(){if(null!==this.jwtToken){var a=this.jwtToken.split(".")[1];return JSON.parse(atob(a)).exp}}},{key:"getUsername",value:function(){if(null!==this.jwtToken){var a=this.jwtToken.split(".")[1];return JSON.parse(atob(a)).username}}},{key:"decodePayload",value:function(){var a=this.jwtToken.split(".")[1];try{return JSON.parse(atob(a))}catch(l){return{}}}}]);return a}();c["default"]=g},function(a,c){Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var d=
0;d<b.length;d++){var f=b[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.jwtToken=b||"";this.payload=this.decodePayload()}e(a,[{key:"getJwtToken",value:function(){return this.jwtToken}},{key:"setJwtToken",value:function(a){this.jwtToken=a}},{key:"getExpiration",
value:function(){if(null!==this.jwtToken){var a=this.jwtToken.split(".")[1];return JSON.parse(atob(a)).exp}}},{key:"decodePayload",value:function(){var a=this.jwtToken.split(".")[1];try{return JSON.parse(atob(a))}catch(l){return{}}}}]);return a}();c["default"]=g},function(a,c){Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var d=0;d<b.length;d++){var f=b[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,
f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.refreshToken=b||""}e(a,[{key:"getToken",value:function(){return this.refreshToken}},{key:"setToken",value:function(a){this.refreshToken=a}}]);return a}();c["default"]=g},function(a,c){Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var d=0;d<b.length;d++){var f=b[d];f.enumerable=
f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.tokenScopes=b||[]}e(a,[{key:"getScopes",value:function(){return this.tokenScopes}},{key:"setTokenScopes",value:function(a){this.tokenScopes=a}}]);return a}();c["default"]=g},function(a,c,e){function g(a){return a&&a.__esModule?
a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var h=b[d];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(a,h.key,h)}}return function(b,d,f){d&&a(b.prototype,d);f&&a(b,f);return b}}();a=e(4);var k=g(a);a=e(1);var l=g(a);a=e(2);var d=g(a);e=e(3);var f=g(e);e=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.IdToken,e=b.RefreshToken,
h=b.AccessToken,r=b.TokenScopes;b=b.State;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.idToken=c?c:new d["default"];this.refreshToken=e?e:new f["default"];this.accessToken=h?h:new l["default"];this.tokenScopes=r?r:new k["default"];this.state=b?b:null}b(a,[{key:"getIdToken",value:function(){return this.idToken}},{key:"setIdToken",value:function(a){this.idToken=a}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(a){this.refreshToken=
a}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setAccessToken",value:function(a){this.accessToken=a}},{key:"getTokenScopes",value:function(){return this.tokenScopes}},{key:"setTokenScopes",value:function(a){this.tokenScopes=a}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(a){this.state=a}},{key:"isValid",value:function(){var a=Math.floor(new Date/1E3);try{return null!=this.accessToken?a<this.accessToken.getExpiration():null!=this.idToken?
a<this.idToken.getExpiration():!1}catch(p){return!1}}}]);return a}();c["default"]=e},function(a,c){function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),b={},k=function(){function a(){e(this,
a)}g(a,null,[{key:"setItem",value:function(a,c){b[a]=c;return b[a]}},{key:"getItem",value:function(a){return Object.prototype.hasOwnProperty.call(b,a)?b[a]:void 0}},{key:"removeItem",value:function(a){return delete b[a]}},{key:"clear",value:function(){return b={}}}]);return a}(),l=function(){function a(){e(this,a);try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(f){this.storageWindow=k}}g(a,[{key:"getStorage",
value:function(){return this.storageWindow}}]);return a}();c["default"]=l},function(a,c,e){function g(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==
Symbol.prototype?"symbol":typeof a},k=function(){function a(a,b){for(var h=0;h<b.length;h++){var c=b[h];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(h,b,c){b&&a(h.prototype,b);c&&a(h,c);return h}}();a=e(4);var l=g(a);a=e(1);var d=g(a);a=e(2);var f=g(a);a=e(3);var m=g(a);a=e(5);var n=g(a);e=e(6);var p=g(e);e=function(){function a(h){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b=
h||{},c=b.ClientId,d=b.AppWebDomain,f=b.TokenScopesArray,e=b.RedirectUriSignIn,g=b.RedirectUriSignOut,m=b.IdentityProvider,n=b.UserPoolId,k=b.AdvancedSecurityDataCollectionFlag;b=b.Storage;if(!(null!=h&&c&&d&&e&&g))throw Error(this.getCognitoConstants().PARAMETERERROR);this.clientId=c;this.appWebDomain=d;this.TokenScopesArray=f||[];if(!Array.isArray(f))throw Error(this.getCognitoConstants().SCOPETYPEERROR);h=new l["default"](this.TokenScopesArray);this.RedirectUriSignIn=e;this.RedirectUriSignOut=
g;this.IdentityProvider=m;this.responseType=this.getCognitoConstants().TOKEN;this.storage=b||(new p["default"]).getStorage();this.username=this.getLastUser();this.userPoolId=n;this.signInUserSession=this.getCachedSession();+this.signInUserSession.setTokenScopes(h);this.advancedSecurityDataCollectionFlag=!0;k&&(this.advancedSecurityDataCollectionFlag=k)}k(a,[{key:"getCognitoConstants",value:function(){return{DOMAIN_SCHEME:"https",DOMAIN_PATH_SIGNIN:"oauth2/authorize",DOMAIN_PATH_TOKEN:"oauth2/token",
DOMAIN_PATH_SIGNOUT:"logout",DOMAIN_QUERY_PARAM_REDIRECT_URI:"redirect_uri",DOMAIN_QUERY_PARAM_SIGNOUT_URI:"logout_uri",DOMAIN_QUERY_PARAM_RESPONSE_TYPE:"response_type",DOMAIN_QUERY_PARAM_IDENTITY_PROVIDER:"identity_provider",DOMAIN_QUERY_PARAM_USERCONTEXTDATA:"userContextData",CLIENT_ID:"client_id",STATE:"state",SCOPE:"scope",TOKEN:"token",CODE:"code",POST:"POST",PARAMETERERROR:"The parameters: App client Id, App web domain, the redirect URL when you are signed in and the redirect URL when you are signed out are required.",
SCOPETYPEERROR:"Scopes have to be array type. ",QUESTIONMARK:"?",POUNDSIGN:"#",COLONDOUBLESLASH:"://",SLASH:"/",AMPERSAND:"&",EQUALSIGN:"=",SPACE:" ",CONTENTTYPE:"Content-Type",CONTENTTYPEVALUE:"application/x-www-form-urlencoded",AUTHORIZATIONCODE:"authorization_code",IDTOKEN:"id_token",ACCESSTOKEN:"access_token",REFRESHTOKEN:"refresh_token",ERROR:"error",ERROR_DESCRIPTION:"error_description",STRINGTYPE:"string",STATELENGTH:32,STATEORIGINSTRING:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
WITHCREDENTIALS:"withCredentials",UNDEFINED:"undefined",SELF:"_self",HOSTNAMEREGEX:/:\/\/([0-9]?\.)?(.[^/:]+)/i,QUERYPARAMETERREGEX1:/#(.+)/,QUERYPARAMETERREGEX2:/=(.+)/,HEADER:{"Content-Type":"application/x-www-form-urlencoded"}}}},{key:"getClientId",value:function(){return this.clientId}},{key:"getAppWebDomain",value:function(){return this.appWebDomain}},{key:"getCurrentUser",value:function(){return this.storage.getItem("CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser")}},{key:"setUser",
value:function(a){this.username=a}},{key:"useCodeGrantFlow",value:function(){this.responseType=this.getCognitoConstants().CODE}},{key:"useImplicitFlow",value:function(){this.responseType=this.getCognitoConstants().TOKEN}},{key:"getSignInUserSession",value:function(){return this.signInUserSession}},{key:"getUsername",value:function(){return this.username}},{key:"setUsername",value:function(a){this.username=a}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(a){this.state=
a}},{key:"getSession",value:function(){var a=new Set(this.TokenScopesArray),b=new Set(this.signInUserSession.tokenScopes.getScopes()),c=this.getFQDNSignIn();if(null!=this.signInUserSession&&this.signInUserSession.isValid())return this.userhandler.onSuccess(this.signInUserSession);this.signInUserSession=this.getCachedSession();if(this.compareSets(a,b)){if(this.signInUserSession.isValid())return this.userhandler.onSuccess(this.signInUserSession);this.signInUserSession.getRefreshToken()&&this.signInUserSession.getRefreshToken().getToken()?
this.refreshSession(this.signInUserSession.getRefreshToken().getToken()):this.launchUri(c)}else{a=new l["default"](this.TokenScopesArray);b=new f["default"];var e=new d["default"],g=new m["default"];this.signInUserSession.setTokenScopes(a);this.signInUserSession.setIdToken(b);this.signInUserSession.setAccessToken(e);this.signInUserSession.setRefreshToken(g);this.launchUri(c)}}},{key:"parseCognitoWebResponse",value:function(a){if(-1<a.indexOf(this.getCognitoConstants().QUESTIONMARK))a=a.split(this.getCognitoConstants().POUNDSIGN)[0],
a=this.getQueryParameters(a,this.getCognitoConstants().QUESTIONMARK),this.getCodeQueryParameter(a);else if(-1<a.indexOf(this.getCognitoConstants().POUNDSIGN)){a=this.getQueryParameters(a,this.getCognitoConstants().QUERYPARAMETERREGEX1);if(a.has(this.getCognitoConstants().ERROR))return this.userhandler.onFailure(a.get(this.getCognitoConstants().ERROR_DESCRIPTION));this.getTokenQueryParameter(a)}}},{key:"getCodeQueryParameter",value:function(a){a.has(this.getCognitoConstants().STATE)?this.signInUserSession.setState(a.get(this.getCognitoConstants().STATE)):
this.signInUserSession.setState(null);if(a.has(this.getCognitoConstants().CODE)){var h=a.get(this.getCognitoConstants().CODE);a=this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_TOKEN);var b=this.getCognitoConstants().HEADER;h={grant_type:this.getCognitoConstants().AUTHORIZATIONCODE,client_id:this.getClientId(),redirect_uri:this.RedirectUriSignIn,code:h};var c=this.onSuccessExchangeForToken.bind(this),
d=this.onFailure.bind(this);this.makePOSTRequest(b,h,a,c,d)}}},{key:"getTokenQueryParameter",value:function(a){var b=new f["default"],h=new d["default"];new m["default"];a.has(this.getCognitoConstants().IDTOKEN)&&b.setJwtToken(a.get(this.getCognitoConstants().IDTOKEN));this.signInUserSession.setIdToken(b);a.has(this.getCognitoConstants().ACCESSTOKEN)&&h.setJwtToken(a.get(this.getCognitoConstants().ACCESSTOKEN));this.signInUserSession.setAccessToken(h);a.has(this.getCognitoConstants().STATE)?this.signInUserSession.setState(a.get(this.getCognitoConstants().STATE)):
this.signInUserSession.setState(null);this.cacheTokensScopes()}},{key:"getCachedSession",value:function(){if(!this.username)return new n["default"];var a="CognitoIdentityServiceProvider."+this.getClientId()+"."+this.username,b=a+".idToken",c=a+".accessToken",e=a+".refreshToken";a=this.storage.getItem(a+".tokenScopesString");var g=[];a&&(g=a.split(" "));a=new l["default"](g);b=new f["default"](this.storage.getItem(b));c=new d["default"](this.storage.getItem(c));e=new m["default"](this.storage.getItem(e));
return new n["default"]({IdToken:b,AccessToken:c,RefreshToken:e,TokenScopes:a})}},{key:"getLastUser",value:function(){var a="CognitoIdentityServiceProvider."+this.getClientId();if(a=this.storage.getItem(a+".LastAuthUser"))return a}},{key:"cacheTokensScopes",value:function(){var a="CognitoIdentityServiceProvider."+this.getClientId(),b=this.signInUserSession.getAccessToken().getUsername();this.username=b;var c=a+"."+b+".idToken",d=a+"."+b+".accessToken",e=a+"."+b+".refreshToken",f=a+".LastAuthUser";
a=a+"."+b+".tokenScopesString";var g=this.signInUserSession.getTokenScopes().getScopes().join(" ");this.storage.setItem(c,this.signInUserSession.getIdToken().getJwtToken());this.storage.setItem(d,this.signInUserSession.getAccessToken().getJwtToken());this.storage.setItem(e,this.signInUserSession.getRefreshToken().getToken());this.storage.setItem(f,b);this.storage.setItem(a,g)}},{key:"compareSets",value:function(a,b){if(a.size!==b.size)return!1;var c=!0,h=!1,d=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var e=a[Symbol.iterator](),f;!(c=(f=e.next()).done);c=!0)if(!b.has(f.value))return!1}catch(t){h=!0,d=t}finally{try{!c&&e["return"]&&e["return"]()}finally{if(h)throw d;}}return!0}},{key:"getHostName",value:function(a){a=a.match(this.getCognitoConstants().HOSTNAMEREGEX);if(null!=a&&2<a.length&&b(a[2])===this.getCognitoConstants().STRINGTYPE&&0<a[2].length)return a[2]}},{key:"getQueryParameters",value:function(a,b){var c=String(a).split(b)[1];c=String(c).split(this.getCognitoConstants().AMPERSAND);
var h=c.length,d=new Map,e;for(e=0;e<h;e++)c[e]=String(c[e]).split(this.getCognitoConstants().QUERYPARAMETERREGEX2),d.set(c[e][0],c[e][1]);return d}},{key:"generateRandomString",value:function(a,b){for(var c="",d=a;0<d;--d)c+=b[Math.round(Math.random()*(b.length-1))];return c}},{key:"clearCachedTokensScopes",value:function(){var a="CognitoIdentityServiceProvider."+this.getClientId(),b=a+"."+this.username+".accessToken",c=a+"."+this.username+".refreshToken",d=a+".LastAuthUser",e=a+"."+this.username+
".tokenScopesString";this.storage.removeItem(a+"."+this.username+".idToken");this.storage.removeItem(b);this.storage.removeItem(c);this.storage.removeItem(d);this.storage.removeItem(e)}},{key:"refreshSession",value:function(a){var b=this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_TOKEN),c=this.getCognitoConstants().HEADER;a={grant_type:this.getCognitoConstants().REFRESHTOKEN,
client_id:this.getClientId(),redirect_uri:this.RedirectUriSignIn,refresh_token:a};var d=this.onSuccessRefreshToken.bind(this),e=this.onFailure.bind(this);this.makePOSTRequest(c,a,b,d,e)}},{key:"makePOSTRequest",value:function(a,b,c,d,e){var h=this.createCORSRequest(this.getCognitoConstants().POST,c);c="";if(h){for(var f in a)h.setRequestHeader(f,a[f]);for(var g in b)c=c.concat(g,this.getCognitoConstants().EQUALSIGN,b[g],this.getCognitoConstants().AMPERSAND);c=c.substring(0,c.length-1);h.send(c);h.onreadystatechange=
function(){4===h.readyState&&(200===h.status?d(h.responseText):e(h.responseText))}}}},{key:"createCORSRequest",value:function(a,c){var d=new XMLHttpRequest;d.open(a,c,!0);this.getCognitoConstants().WITHCREDENTIALS in d?d.open(a,c,!0):("undefined"===typeof XDomainRequest?"undefined":b(XDomainRequest))!==this.getCognitoConstants().UNDEFINED?(d=new XDomainRequest,d.open(a,c)):d=null;return d}},{key:"onFailure",value:function(a){this.userhandler.onFailure(a)}},{key:"onSuccessRefreshToken",value:function(a){a=
JSON.parse(a);Object.prototype.hasOwnProperty.call(a,this.getCognitoConstants().ERROR)?(a=this.getFQDNSignIn(),this.launchUri(a)):(Object.prototype.hasOwnProperty.call(a,this.getCognitoConstants().IDTOKEN)&&this.signInUserSession.setIdToken(new f["default"](a.id_token)),Object.prototype.hasOwnProperty.call(a,this.getCognitoConstants().ACCESSTOKEN)&&this.signInUserSession.setAccessToken(new d["default"](a.access_token)),this.cacheTokensScopes(),this.userhandler.onSuccess(this.signInUserSession))}},
{key:"onSuccessExchangeForToken",value:function(a){var b=JSON.parse(a),c=new m["default"],e=new d["default"],h=new f["default"];if(Object.prototype.hasOwnProperty.call(b,this.getCognitoConstants().ERROR))return this.userhandler.onFailure(a);Object.prototype.hasOwnProperty.call(b,this.getCognitoConstants().IDTOKEN)?this.signInUserSession.setIdToken(new f["default"](b.id_token)):this.signInUserSession.setIdToken(h);Object.prototype.hasOwnProperty.call(b,this.getCognitoConstants().ACCESSTOKEN)?this.signInUserSession.setAccessToken(new d["default"](b.access_token)):
this.signInUserSession.setAccessToken(e);Object.prototype.hasOwnProperty.call(b,this.getCognitoConstants().REFRESHTOKEN)?this.signInUserSession.setRefreshToken(new m["default"](b.refresh_token)):this.signInUserSession.setRefreshToken(c);this.cacheTokensScopes();this.userhandler.onSuccess(this.signInUserSession)}},{key:"launchUri",value:function(a){window.open(a,this.getCognitoConstants().SELF)}},{key:"getSpaceSeperatedScopeString",value:function(){var a=this.signInUserSession.getTokenScopes().getScopes();
a=a.join(this.getCognitoConstants().SPACE);return encodeURIComponent(a)}},{key:"getFQDNSignIn",value:function(){null==this.state&&(this.state=this.generateRandomString(this.getCognitoConstants().STATELENGTH,this.getCognitoConstants().STATEORIGINSTRING));var a=this.IdentityProvider?this.getCognitoConstants().AMPERSAND.concat(this.getCognitoConstants().DOMAIN_QUERY_PARAM_IDENTITY_PROVIDER,this.getCognitoConstants().EQUALSIGN,this.IdentityProvider):"",b=this.getSpaceSeperatedScopeString(),c="";this.getUserContextData()&&
(c=this.getCognitoConstants().AMPERSAND+this.getCognitoConstants().DOMAIN_QUERY_PARAM_USERCONTEXTDATA+this.getCognitoConstants().EQUALSIGN+this.getUserContextData());return this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_SIGNIN,this.getCognitoConstants().QUESTIONMARK,this.getCognitoConstants().DOMAIN_QUERY_PARAM_REDIRECT_URI,this.getCognitoConstants().EQUALSIGN,
encodeURIComponent(this.RedirectUriSignIn),this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().DOMAIN_QUERY_PARAM_RESPONSE_TYPE,this.getCognitoConstants().EQUALSIGN,this.responseType,this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().CLIENT_ID,this.getCognitoConstants().EQUALSIGN,this.getClientId(),this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().STATE,this.getCognitoConstants().EQUALSIGN,this.state,this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().SCOPE,
this.getCognitoConstants().EQUALSIGN,b,a,c)}},{key:"signOut",value:function(){var a=this.getFQDNSignOut();this.signInUserSession=null;this.clearCachedTokensScopes();this.launchUri(a)}},{key:"getFQDNSignOut",value:function(){return this.getCognitoConstants().DOMAIN_SCHEME.concat(this.getCognitoConstants().COLONDOUBLESLASH,this.getAppWebDomain(),this.getCognitoConstants().SLASH,this.getCognitoConstants().DOMAIN_PATH_SIGNOUT,this.getCognitoConstants().QUESTIONMARK,this.getCognitoConstants().DOMAIN_QUERY_PARAM_SIGNOUT_URI,
this.getCognitoConstants().EQUALSIGN,encodeURIComponent(this.RedirectUriSignOut),this.getCognitoConstants().AMPERSAND,this.getCognitoConstants().CLIENT_ID,this.getCognitoConstants().EQUALSIGN,this.getClientId())}},{key:"getUserContextData",value:function(){if("undefined"!==typeof AmazonCognitoAdvancedSecurityData){var a="";this.username&&(a=this.username);var b="";this.userpoolId&&(b=this.userpoolId);if(this.advancedSecurityDataCollectionFlag)return AmazonCognitoAdvancedSecurityData.getData(a,b,this.clientId)}}},
{key:"isUserSignedIn",value:function(){return null!=this.signInUserSession&&this.signInUserSession.isValid()||null!=this.getCachedSession()&&this.getCachedSession().isValid()}}]);return a}();c["default"]=e},function(a,c){Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,
e);return b}}(),g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),b="Sun Mon Tue Wed Thu Fri Sat".split(" "),k=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}e(a,[{key:"getNowString",value:function(){var a=new Date,c=b[a.getUTCDay()],e=g[a.getUTCMonth()],k=a.getUTCDate(),l=a.getUTCHours();10>l&&(l="0"+l);var q=a.getUTCMinutes();10>q&&(q="0"+q);var h=a.getUTCSeconds();10>h&&(h="0"+h);a=a.getUTCFullYear();return c+" "+e+" "+k+" "+
l+":"+q+":"+h+" UTC "+a}}]);return a}();c["default"]=k},function(a,c,e){function g(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var b=e(1);Object.defineProperty(c,"CognitoAccessToken",{enumerable:!0,get:function(){return g(b)["default"]}});var k=e(2);Object.defineProperty(c,"CognitoIdToken",{enumerable:!0,get:function(){return g(k)["default"]}});var l=e(3);Object.defineProperty(c,"CognitoRefreshToken",{enumerable:!0,get:function(){return g(l)["default"]}});
var d=e(4);Object.defineProperty(c,"CognitoTokenScopes",{enumerable:!0,get:function(){return g(d)["default"]}});var f=e(7);Object.defineProperty(c,"CognitoAuth",{enumerable:!0,get:function(){return g(f)["default"]}});var m=e(5);Object.defineProperty(c,"CognitoAuthSession",{enumerable:!0,get:function(){return g(m)["default"]}});var n=e(8);Object.defineProperty(c,"DateHelper",{enumerable:!0,get:function(){return g(n)["default"]}});var p=e(6);Object.defineProperty(c,"StorageHelper",{enumerable:!0,get:function(){return g(p)["default"]}})}])});
